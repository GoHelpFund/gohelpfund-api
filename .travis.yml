language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
sudo: required
services:
- docker
notifications:
  on_success: always
  on_failure: always
  email:
  - daniel.tirzuman@gohelpfund.com
branches:
  only:
  - develop
  - master
env:
  global:
  # DOCKER_USERNAME
  - secure: RODRC4pY27rSUh4+Zn6/JzGmuJ9iHMsvQrHIypaXpK3DPRZnIS4WJ1ZQqwn1a2Q48TxRT7wMeQl5HZE7Cx2gu9zacK70xLd3CnN+iwz3Ne+tknR0FyCc/B7dGPb8yYkBnlJ9+4LBLBMxkncrkFldDHunmlYRb4bzx/Kj/c/LvM/DX+T0x128fk1RPznAuTlEKyTjs4FSkz117PI2Y04MZbOAq7Nb7Gyc+QFeHWyEanpin/9ohay/ReOaldg5cZWXIlvXSt5xbjo05uBa8JmL7PkWah4mpZugy4FRAAkwnVXgK/NWwdQFAJjnFV/QfDADkj9RxDogJ8Pmhnua32Jmsl0GmOc0Etym4L0IS6G1l8C4Sjeu6QrxGEBomHWLYT4d2jf4CabLXsP0vTSvAoK5tnTJOJH8DHJ4C/YkUdCFw1Wpu4Xn1a9m88O5tuurbLsohb+hrCs1vSb591nJKMuFh8R9p0ypMJnEWHvnzA2samfReV3fmtbfKERqWYIctpsV1ISc5Ks1vIwOJe1piW6ah+5VPDN3wuVdYexU0woZL7X+osA+ztXSld3O4yrCPgdCk7keWlMFTP3Ig6BCxRtVh/qRcuPTUC2aFMT+0+crrmPN/cHgG90P6otFn71X6UyownnQ4RAB860Hh1Y6j9yKcC1OxGiaSPNg2/PRYTXOk0E=
  # DOCKER_PASSWORD
  - secure: BfifEoWe8Sf1tiL91chlQUB/Md7Mzo5aFQQgXVqI5sOTy4/P/ie1RWCfPh8OMyMoI8OM3TBaV2J0AwAGqof2trln99zsuqwnJjCaRKVoLUMSneFUw8kS0UPcZn7QW5DQeGzpzeF7pUbEa7N/RIK8J5LacJp1TcxZraHDdA4Z5HRJ67u4CeMMrS7VKSLoQBkwkruyMrFJ8JQp2WBhaCCKjssG4+dNOEmRmgjXwKhGk79KKfdwKGHFK+2kgUiaSBSSnkinas235zcx8ppbS//vVgSulRuaAEkHse+g/glBiRxh4Aeba1Cdof64cfe0IEWrfqGwi9BzyvegV1mNsUYj8nJICiKkhiIWREGDoL5/SJoO4z0/NeKIkT92NygQSx5/+OuUginQ3ySVyCSujftK1Suz6oN+Nxf04HRagRlS1bP41GnMoeaYcDVktz23oTyjCDl463LCdijII5tD+g+laoNW8nosWLatHJ2BGNH523scQIm9SoOK4F9lIw32UOxv3macP3LBjzNh72KYupC5c0YXRermWC3UfOYQ/pUa4Sc8nOzc39U5z0p7oWbJxIhKKqadpC7kw31BCCXQy8ppfP8+uqdOH4a8DI4rQxZeZLuTr7IyGjODg08olWtHNRovAgjGPlm0eKWbrDOaw3kActThXVKWCCdJ1PnaY+ROqq4=
  # AWS_ACCESS_KEY
  - secure: U5voRthS6QDpSRt7BT//AgVuFSj7LatLtYL9QENn1c1Iay8r98PpBfCZ7RZoIgMYYQjGSNQnT1uUId4swn3ypbv0WrFWIB6qevqKOYcsdzKnP+8KTkewrnmV8vq4E4KynZcV8FPJAqdcgBxPiKRrsQUSgvJyM/iNdzN/2seVI3kChNNZb7pZn0CGrZNLTOa2gc2XSJ5qcidFzExval1a5AVLk5ZjfWDdjUVHd9uUGoutdTQQEPrOh/G0M/npk0cbHTd5Uo6j3H2HDAhM+4PEl23G3HCQe4NC92fXwcqBuTVhheYKA0X6UlTTnGG91WwR7CYEnKSzrIf7fXVDjWHdjwaryHu55Os8oA24LALR6ZH/txpnbjrFvxGYaN7tHPBvDCgz8JU3kBxJEXx/lGl9SzwyWWYlWQ50qjOBF9LrhRBeQSjs9gsvHU45ygFbrnXe4Rft5C4hlp8k4hsXm5dghgal6eaTLhkIJngOXC1b9hJ35bwUoacTicpAIs6Ewz8OJb55wWw9mqQOzekmz0iRaQjlxx9Ox/x85K9pKQGWWrU7FO0iNgkgBC7J7eK3G5TPm35d+7/pdIvP+Ro8Ogbmg25Mw8t67VT4O4oafTp3+K9ZCF898kfwjIBzQdbuO+3Rxmf0ChJn7mffQWuB/W4AaS7wKxTv8aB+eBLOFgCioiU=
  # AWS_SECRET_KEY
  - secure: i/bZnZZBiLWBwEdg2azYiFxb2ryHm6RpVgoTXDi0evoCvKzvbchNmZQQBW0OYSr5lZw9/i+Cvl4pCacdX2hSj3y1uWNNFVgDUZ027s7IhSIsiblEl0Ltr/GdytpAjZz7NbvXa1c/eTKy3wMH+vJ4LkgyvwZX7K2dgkw6u1Nc2OgclWyzsbtb42LWFfwe313G89Rxi2NQIddaEgT6LvlD8/RDd2vyo6ZPR+1VY6A/4mQNnEuLaZWYZmGCEGLMCeZ3f2/Rq48QXQelHQ8Xm9K4nhxzf3CySHaCYYJ2mPk+tmyHHowWOEjr1gboQ1qBOT8kZJaApxzAMcLPf9GrZRfJeXDrlpxCEiFyUF9+o+Pjvde+8HKXeBAgwWPalCRCOxoZjcZrFMmsfrKho88ruqN0/3TNbu7A+47pE1tYT7NgaWM3SSznbhC2+OKo2N5GVeypJchFNDAJAhLpZyLmfO3Pfj6EtLRe172980sh5Q/tO1iVIgV+Frg9U9bgXtPA/6um9XV28yWhw/aSPBZ4VwHQIBbsBTQC/PSq9i+ezbBa+4UnjjN/rDSC28NjRzEyhW1paVadvPI66dHCzHLPwwGGJlHrPODdbSJFe1zmQ7k4aFzVXx2tyJ8CHX8WJTxt7vA4qXmEHjD5I6FIhMRbIk0icrE/PBahT31Rpppge/vMnOY=
  # GITHUB_TOKEN
  - secure: lONZuzSEwxW4pMRn1Ssk4t861WhZP3N/Wucb2E7zk7iMnY3CMn0TrN4DVBPCfqkWFkas/6laeaT9IDhgI5FjzwM/HrqLRFv+dn/vocUtzXCabl2hAvAuOLnEkdYUg7eY5zKI8t7NrptMmq2aotnRl5BLnBYTxIq2PEKGhDLM8X8TcJ8TpdAHEV1cUMgaJAs80o6cigkwWQjFDKvElFio6s2ghvu4iwryvDYlCcxrakPfb4MWOn+lPM7FVWQaMb0mLNowHPamgWWo3LqXfwtpTgyt4j/PTRfFGfBYIspZh6iEraSIrnhLWoziJW5/B2y7VcDCHlbit80KhihaWrrluELU1Fq96qHJA218ozLrg1jxPNiUn6v3BN/R4sShDLQuBHek5kobYsuWNyzoLvodzavZlNfhxL04LDA/UufdKSx0aTiyQubD5tBnn7R+AirVekC4uiner6qquM0DFV/ItBdjuekA5efri0AM6sg2E0WRxbd7aJd70Buk/gbAi6LcNvxdOhdKiNPXMK1b/9YZbvYO22k2QZcR66XxL1vfbQjT35+Kk8o+YonFumqy/gC2YqLD3JciNk/sk6CKekVnrfuaaRAJAFs9PNu06NxfBMvw1gRQK1WYYbhc9DeNoEmdANBLRa6Wr25hPxTexp/GzG+wsXgj7QihjEH7HWa59GI=
  # GIT_CONFIG_REPO_URI
  - secure: ENkGxFc8u7FmdcvxIaZ3erN4uBUyrtVPbnyafrEwBwbeFXtWLceXACELgr39sblqZrYEwYr15usgIyREOz9FargRo6V/LwV1LLXgTXbplf2VZ3sXWa2rkAGaFzg806fEThT5N8f9OmEDfJyFvpdih/Ny8npuJI/JHtVROvJ5KUgyIYmZW66JhX7BOyYmbcBWC5TCJCpBdHp7xreVQ2jj2HJ4er19YHR40k93SJD6jbo7U+XMDMy458uZA4qthHXfjOD+dkNoxfX9TMYlUEUZgWJ6WJl6t/5bvam3lhAQOskQlv45EytZRGdA28ovssQlwVDKBT+fto/y6k2FBaZ8IqBqwlyLThHLoi0tgeQw0sRU821vfdjo7NPAELKmUGBsPBUv62npVDc/zFeuWKA1lLVMb/5a9UHmkRuDKFNO7VWtnuFCTcyyp48rj4nSUXEXg4vcm1+BQ8KDjfTZLyWMPvIHoszLIygO1bUecsC2Jf3jiJLGR6fXRUjV4BBnlBZ30YUkXifQ5X93yvHlTmAsngIiSEt4RTUsxYy0QiuLcR5KxRbOEbIRGNeB1Bh4jXdodyu6/EUchNftLK9C3BbHIbDiZsqb5KgLc9xSbBzcoZbR9jBFBFi1Dk1d3s/OGU566UGd3wDHh+gXbi7rfUGcKjilaKYa1iIsO954XC7hC1w=
  # GIT_CONFIG_REPO_USERNAME
  - secure: P7ALzhhYpLyPU8WZt4XBR5fYtDp8/x4mJBvIaOaGFSwUI58rW0ALKGwe+ZXP0LDECZjgohooIPZ392GcTAPl51nPmH/xxQzC+s/yB0YIhk4B2lMwTSfBuyiYHCYwst5BZ80G0pp+jWAQToxX7uj5OOwhOtW/mAuc1nNpMhK4PReTXsQLCKwjDjFot7+5JdXBuMJE1aHeHB3HvEB7Mr3ydbdF1QyLqQbDtEnKbOk30xPKUiyRVquNjkEplw/5bog/P4nFri2v9r7MN4fpuP28nKSk1p4d485792Eol4yi4ONs0Xj9adJ1c2t2K5iwtQsH9EGpOKd9u0KyAQU5HkXseZvvbgF/S4z5Map8EfzLpIkCXNq6SJH9Utrb37xSM3wfWJgmuQ48+IKmIB9qSGa3zUC5vKcVoFazwKfoI6xWb9C/bopdVzaHsKAN2ybS3TZbrP/l4F5zAQNwQPbJoRjH4vfs1UdJCG8V60fDu80aILKhImEOuo8GB7+HnXwd0YPJymUBt0QsTCEwPMnnTjM2UQ7JbZv5Gfk6bNUKDeE0H7BTd6hEGR4b4Ud+03HgbP300ObyVNXYjyjBp6AR3Ksu6Nff3/0mvq0c+YPOPAlfl8BVdA4C/m8OXvbkMzy19OEDEogSWnX0owyMkslzrab39DHyToiDf9uQ8NA2y47fFxs=
  # GIT_CONFIG_REPO_PASSWORD
  - secure: DZd6bsBo57+wBS3jOaVH3PhQNPwN3hVifc5dYyODo/wDMYXyijkeJjyVk2ZxthhNlw9CXtMpaaOxF6hMPcepY4RXx5rb8AGT/yBpqBKy+uRzFZOD5CutdC+kc/z4biDdjJh9oT6PUFMwY4jh/JqBtN3qpuJGogzPR/hXU5gVSf2nDAlI4Lv2LnU6CbQV0QujhaPzyko89+7Olx9PsKE+1MgaZ0bvob8qekKL/M778MLER70Q/qm142TL2HQi4/G/0LGC+YZx9yUPX3+vCPEigPiVW4prEVA5wRAGD9cVyJNqTf7YR25C6NOdCLcfC3HtXTWml7ZBZHhjW47HE2S4L7Q0Rhqs9MLVM6i1NYSXWjzJ9afRstWnYEdW353D76JAdB/Jv5CIfL1z4Wy85Tiy3q+G7YvApRNtblgaIpp5OTk0jLLFHwxzJtXnCbTz1c50S7lVkEttyMn7+uHQMPnLu1YD1cVuSxZ+wUPAOOAbcJcU9a75zSCcDKBHrwXLHTcjjHo4Y7s17umroGK4j+syxNiVo2JYESsiuCoJbCC25uyai30IdG/tyQk73ObB+UydcQhF7XrNbm/4Xrj7XKKYQnvBwS2EBsGB6OKFZ+lr7yWi8OBmAJsMwd12/prtGAGzPvqgg3iJJ38+gyRcRqxylhDaLpWlC4hSHCcCktvSgMU=
  # SYMMETRIC_ENCRYPTION_KEY
  - secure: KzA8EXwJVyfMTy580vg1hzjpSzUWiRAu42tDd98nzuHuOXots5ZI9MZleLNE1etRzsHUVucmrOQLHHStGwS7bNEvy8dEdSbHnBgbtwi0v8wIMmhYmYTJ3N7IKZoqyrS5RabGhZhwHcu9xqnRbVT0fY9AUGryZegmJVTMOnnd9EKh53pdziX7E01ELPDK0fFEsWClWGjTs3P5CbUGebq6paE1UZW7NV2LpglstJ75oDVaHkGi7cRVH/q6GWHcC5MdNETnmZa/fapMhrPBlJFa22vIwTmtwhVBXPuFuuF3+xUAQtRD048HaZA8Lno+mCGzXTTHwrO8NjRkkP21SfO21ITWzLSXoPqCsHg9DTfAJwrBbZPddY1QwFDpsyiwc/PdXs9m4jjd0zmSmFSHT1qBVM8Y1eVktYri1XhmN4e7S/wyov2kwtFXjLnofbMbCzEVly2EEqg/fnTtKBduIdynSXU1jOtHsMqy10I9jHOCl8MntBmakThptZ/AW/IsCyLbOSk5ZQm8E0TsNJS9nl0PM18/B94act/pplFis/OPMCC0tShu/gBgQ0uuZyGzZ5mxR1lE3nc+ufjOxTvQJcy8ZqzfQXThCUQsNgl9lHlT+mLb0d++DyG5G0Cw18wCEo7EqygibuRG6lEu9g+3mcnIO31J0VTbIe/D5X3mqbGRtmE=
before_install:
- gem install travis -v 1.8.5 --no-document
- sudo curl -k -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- export BUILD_NAME=gohelpfund-$TRAVIS_BRANCH-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
- export CONTAINER_IP=18.184.83.174
- export PLATFORM_TEST_NAME="gohelpfund-platform-tests"
script:
  - if [ "$TRAVIS_BRANCH" == "develop" ]; then sh travis_scripts/tag_build-dev.sh; fi
  - if [ "$TRAVIS_BRANCH" == "master" ]; then sh travis_scripts/tag_build-prod.sh; fi
  - sh travis_scripts/build_services.sh
  - sh travis_scripts/deploy_to_docker_hub.sh
  - if [ "$TRAVIS_BRANCH" == "develop" ]; then && sh travis_scripts/deploy_to_amazon_ecs-dev.sh; fi
  - if [ "$TRAVIS_BRANCH" == "master" ]; then sh travis_scripts/deploy_to_amazon_ecs-prod.sh; fi
